<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Remembrance Stack</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="stack" id="stack"></div>

  <script>
    const stack = document.getElementById('stack');
    const storedImages = JSON.parse(sessionStorage.getItem('images') || "[]");
    const total = storedImages.length;

    storedImages.sort((a, b) => a.modified - b.modified);

    storedImages.forEach((img, i) => {
      const el = document.createElement('img');
      el.src = img.src;

      // 이미지 위치를 총 개수 기준으로 계산해서 3D 배치
      el.style.transform = `
        translateX(${i * 10}px)
        translateY(${-i * 5}px)
        translateZ(${(total - i) * 10}px)
      `;
      el.style.zIndex = "1";

      el.addEventListener('mouseover', () => {
        el.style.zIndex = "100";
        el.style.transform = `
          translateX(${i * 10}px)
          translateY(-50px)
          translateZ(${(total - i) * 10}px)
        `;
      });

      el.addEventListener('mouseout', () => {
        el.style.zIndex = "1";
        el.style.transform = `
          translateX(${i * 10}px)
          translateY(${-i * 5}px)
          translateZ(${(total - i) * 10}px)
        `;
      });

      stack.appendChild(el);
    });
  </script>
</body>
</html>
